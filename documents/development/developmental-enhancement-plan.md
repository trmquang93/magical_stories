
## Developmental Enhancement Plan

*(This phase commences after the successful completion and validation of T9: Documentation Update for Growth Collections)*

| Step   | Task Group                        | Sub-Task ID | Description                                                                                                                                                   | Files Affected                                                                                                                                                                                         | Effort | Dependencies     | Status   |
| :----- | :-------------------------------- | :---------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------ | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :----- | :--------------- | :------- |
| **E1** | **Core Generation Enhancement**   | ST-E1.1     | Refine `StoryService` AI Prompts: Explicitly request richer vocabulary, varied sentence structures, and clear narrative arcs based on age group.              | `App/Services/StoryService.swift`                                                                                                                                                                      | M      | -                | Pending  |
|        |                                   | ST-E1.2     | Refine `CollectionService` AI Prompts: Apply similar prompt refinements for stories generated within Growth Collections.                                      | `App/Services/CollectionService.swift`                                                                                                                                                                 | M      | -                | Pending  |
|        |                                   | ST-E1.3     | Implement "Vocabulary Boost" UI: Add toggle/option in `StoryFormView` and `CollectionFormView` UI.                                                            | `App/Features/StoryGeneration/StoryFormView.swift`, `App/Features/GrowthCollections/CollectionFormView.swift`                                                                                          | S      | -                | Pending  |
|        |                                   | ST-E1.4     | Integrate "Vocabulary Boost" Setting: Add persistence for the setting via `SettingsService` / `SettingsRepository`.                                           | `App/Services/SettingsService.swift`, `App/Persistence/SettingsRepository.swift`, `App/Models/SettingsDataModels.swift` (if needed)                                                                    | M      | -                | Pending  |
|        |                                   | ST-E1.5     | Update Prompt Logic based on Setting: Modify `StoryService` & `CollectionService` to adjust prompts if "Vocabulary Boost" is enabled.                         | `App/Services/StoryService.swift`, `App/Services/CollectionService.swift`                                                                                                                              | M      | ST-E1.4          | Pending  |
|        |                                   | ST-E1.6     | *Optional:* Highlight Boosted Words: Implement logic in `PageView` to visually distinguish vocabulary introduced via the boost feature.                       | `App/Features/Library/PageView.swift`                                                                                                                                                                  | M      | ST-E1.5          | Pending  |
|        |                                   | ST-E1.7     | Write/Update Tests: Cover new prompt logic, settings integration, and optional highlighting.                                                                  | `magical-storiesTests/Services/StoryServiceTests.swift`, `magical-storiesTests/Services/CollectionServiceTests.swift`, `magical-storiesTests/Services/SettingsServiceTests.swift`, relevant View tests | L      | ST-E1.5          | Pending  |
| **E2** | **Interactivity & Reflection**    | ST-E2.1     | Design "Feeling Prompts" UI/UX: Determine how prompts appear in/after stories (overlay, separate screen, etc.) within `StoryDetailView`.                      | Design Task                                                                                                                                                                                            | S      | -                | Pending  |
|        |                                   | ST-E2.2     | Implement "Feeling Prompts" Toggle: Add UI toggle in `SettingsView` and persistence via `SettingsService`/`Repository`.                                       | `App/Features/Settings/SettingsView.swift`, `App/Services/SettingsService.swift`, `App/Persistence/SettingsRepository.swift`                                                                           | M      | -                | Pending  |
|        |                                   | ST-E2.3     | Implement Prompt Display Logic: Conditionally display designed prompts in `StoryDetailView` based on the setting. Consider frequency/placement logic.         | `App/Features/Library/StoryDetailView.swift`                                                                                                                                                           | M      | ST-E2.1, ST-E2.2 | Pending  |
|        |                                   | ST-E2.4     | *(Future)* Implement Simple Story Choices: *Deferred*. Requires significant architectural changes to story generation and data models.                        | -                                                                                                                                                                                                      | XL     | -                | Deferred |
|        |                                   | ST-E2.5     | Write/Update Tests: Cover settings integration and conditional display logic for prompts.                                                                     | `magical-storiesTests/Services/SettingsServiceTests.swift`, `magical-storiesTests/Views/StoryDetailViewTests.swift` (if testable)                                                                      | M      | ST-E2.3          | Pending  |
| **E3** | **Growth Collections Alignment**  | ST-E3.1     | Review/Refine `DevelopmentalFocus` Enum: Map enum cases explicitly to research benefits (Empathy, Resilience, etc.). Update descriptions if needed.           | `App/Models/StoryDataModels.swift` (`GrowthCategory.swift` if separate)                                                                                                                                | S      | -                | Pending  |
|        |                                   | ST-E3.2     | Update `CollectionService` Generation Logic: Ensure generated stories strongly align with the selected `DevelopmentalFocus` theme. Refine internal prompts.   | `App/Services/CollectionService.swift`                                                                                                                                                                 | L      | ST-E3.1          | Pending  |
|        |                                   | ST-E3.3     | Add Thematic Content Validation: Implement checks (manual review process or automated heuristics if feasible) to verify theme relevance in generated stories. | Process/Tooling Task                                                                                                                                                                                   | M      | ST-E3.2          | Pending  |
|        |                                   | ST-E3.4     | Write/Update Tests: Verify that story generation logic incorporates thematic targeting based on `DevelopmentalFocus`.                                         | `magical-storiesTests/Services/CollectionServiceTests.swift`                                                                                                                                           | M      | ST-E3.2          | Pending  |
| **E4** | **Routine & Sleep Promotion**     | ST-E4.1     | Design "Bedtime Mode" UI/UX: Define dimmer color palette, reduced animations, optional timer behavior. Consider using an `@Environment` key.                  | Design Task                                                                                                                                                                                            | M      | -                | Pending  |
|        |                                   | ST-E4.2     | Implement "Bedtime Mode" Toggle: Add UI toggle in `SettingsView` and persistence via `SettingsService`/`Repository`.                                          | `App/Features/Settings/SettingsView.swift`, `App/Services/SettingsService.swift`, `App/Persistence/SettingsRepository.swift`                                                                           | M      | -                | Pending  |
|        |                                   | ST-E4.3     | Apply "Bedtime Mode" Styles: Conditionally modify styles/animations in key views (`MainTabView`, `StoryDetailView`, `PageView`, etc.) based on the setting.   | Multiple UI Files (`*.swift`)                                                                                                                                                                          | L      | ST-E4.1, ST-E4.2 | Pending  |
|        |                                   | ST-E4.4     | Implement Reading Streak Logic: Track consecutive days of story completion via `PersistenceService` or a new `RoutineService`. Store last read date.          | `App/Services/PersistenceService.swift` (or new Service/Repository), `App/Models/*DataModels.swift`                                                                                                    | M      | -                | Pending  |
|        |                                   | ST-E4.5     | Implement Reading Streak Display: Show the current streak count subtly in `HomeView` or `LibraryView`.                                                        | `App/Features/Home/HomeView.swift`, `App/Features/Library/LibraryView.swift`                                                                                                                           | S      | ST-E4.4          | Pending  |
|        |                                   | ST-E4.6     | Write/Update Tests: Cover Bedtime Mode setting and application, and streak tracking logic.                                                                    | `magical-storiesTests/Services/SettingsServiceTests.swift`, `magical-storiesTests/Services/PersistenceServiceTests.swift` (or new Service tests), relevant View tests                                  | L      | ST-E4.3, ST-E4.5 | Pending  |
| **E5** | **Parental Guidance Integration** | ST-E5.1     | Design Parent Corner UI: Simple informational view, potentially scrollable text/sections within `SettingsView` or a separate modal/pushed view.               | Design Task                                                                                                                                                                                            | S      | -                | Pending  |
|        |                                   | ST-E5.2     | Curate/Write Content: Extract concise, actionable tips from the research document provided.                                                                   | Content Task                                                                                                                                                                                           | S      | -                | Pending  |
|        |                                   | ST-E5.3     | Implement Parent Corner View: Build the SwiftUI view with the static content.                                                                                 | `App/Features/Settings/ParentCornerView.swift` (new file)                                                                                                                                              | S      | ST-E5.1, ST-E5.2 | Pending  |
|        |                                   | ST-E5.4     | Integrate Navigation: Add a button/link in `SettingsView` or `HomeView` to navigate to the Parent Corner.                                                     | `App/Features/Settings/SettingsView.swift` (or `HomeView.swift`)                                                                                                                                       | S      | ST-E5.3          | Pending  |

This plan provides a structured approach to implementing the suggested enhancements, focusing on improving the educational and developmental value of the Magical Stories app. Each step builds upon the existing architecture and aligns with the research insights.
